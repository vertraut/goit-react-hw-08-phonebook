{"version":3,"sources":["redux/auth/auth-operations.js","redux/auth/auth-selectors.js","redux/auth/auth-slice.js","Components/UserMenu/default-avatar.png","Components/UserMenu/UserMenu.js","Components/Navigation/Navigation.js","Components/AppBar/AppBar.js","Components/PrivateRoute.js","Components/PublicRoute.js","Components/Loader/Loader.js","App.js","redux/contacts/contacts-reducer.js","redux/store.js","index.js","Components/AuthNav/AuthNav.module.css","Components/Navigation/Navigation.module.css","Components/UserMenu/UserMenu.module.css","redux/contacts/contacts-actions.js","Components/Container/Container.js","Components/AuthNav/AuthNav.js","Components/AppBar/AppBar.module.css","Components/Container/Container.module.css","Components/Loader/Loader.module.css","redux/contacts/contacts-operations.js"],"names":["axios","defaults","baseURL","token","headers","common","Authorization","register","createAsyncThunk","credentials","a","post","data","logIn","operations","logOut","fetchCurrentUser","_","thunkAPI","state","getState","persistedToken","auth","rejectWithValue","get","authSelectors","getIsLoggedIn","isLoggedIn","getUsername","user","name","getIsFetchingCurrent","isFetchingCurrentUser","authSlice","createSlice","initialState","email","extraReducers","authOperations","fulfilled","action","payload","pending","rejected","UserMenu","dispatch","useDispatch","useSelector","avatar","defaultAvatar","className","s","container","src","alt","width","type","onClick","Navigation","to","exact","link","activeClassName","activelink","AppBar","appbar","AuthNav","PrivateRoute","children","redirectTo","routeProps","PublicRoute","restricted","shouldRedirect","Loader","spinner","color","height","HomeView","lazy","RegisterView","LoginView","ContactsView","App","useEffect","Container","fallback","path","itemsReducer","createReducer","fetchContacts","addContact","deleteContact","filter","id","toString","isLoadingReducer","errorReducer","filterReducer","contactsActions","contactsReducer","combineReducers","items","isLoading","error","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","authPersistConfig","key","storage","whitelist","store","configureStore","reducer","persistReducer","authReducer","contacts","devTools","process","persistor","persistStore","ReactDOM","render","StrictMode","loading","document","getElementById","module","exports","updateFilter","createAction","contact","console","log","delete"],"mappings":"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","file":"static/js/main.678598f0.chunk.js","sourcesContent":["import axios from 'axios';\r\nimport { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\naxios.defaults.baseURL = 'https://goit-phonebook-api.herokuapp.com/';\r\n\r\nconst token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nconst register = createAsyncThunk('auth/register', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/signup', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    // TODO: Добавить обработку ошибки error.message\r\n  }\r\n});\r\n\r\nconst logIn = createAsyncThunk('auth/login', async credentials => {\r\n  try {\r\n    const { data } = await axios.post('/users/login', credentials);\r\n    token.set(data.token);\r\n    return data;\r\n  } catch (error) {\r\n    // TODO: Добавить обработку ошибки error.message\r\n  }\r\n});\r\n\r\n/*\r\n * POST @ /users/logout\r\n * headers: Authorization: Bearer token\r\n * После успешного логаута, удаляем токен из HTTP-заголовка\r\n */\r\nconst logOut = createAsyncThunk('auth/logout', async () => {\r\n  try {\r\n    await axios.post('/users/logout');\r\n    token.unset();\r\n  } catch (error) {\r\n    // TODO: Добавить обработку ошибки error.message\r\n  }\r\n});\r\n\r\nconst fetchCurrentUser = createAsyncThunk(\r\n  'auth/refresh',\r\n  async (_, thunkAPI) => {\r\n    const state = thunkAPI.getState();\r\n    const persistedToken = state.auth.token;\r\n\r\n    if (persistedToken === null) {\r\n      return thunkAPI.rejectWithValue();\r\n    }\r\n\r\n    token.set(persistedToken);\r\n    try {\r\n      const { data } = await axios.get('/users/current');\r\n      return data;\r\n    } catch (error) {\r\n      // TODO: Добавить обработку ошибки error.message\r\n    }\r\n  },\r\n);\r\n\r\nconst operations = {\r\n  register,\r\n  logOut,\r\n  logIn,\r\n  fetchCurrentUser,\r\n};\r\nexport default operations;\r\n","const getIsLoggedIn = state => state.auth.isLoggedIn;\r\n\r\nconst getUsername = state => state.auth.user.name;\r\n\r\nconst getIsFetchingCurrent = state => state.auth.isFetchingCurrentUser;\r\n\r\nconst authSelectors = {\r\n  getIsLoggedIn,\r\n  getUsername,\r\n  getIsFetchingCurrent,\r\n};\r\nexport default authSelectors;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport authOperations from './auth-operations';\r\n\r\nconst initialState = {\r\n  user: { name: null, email: null },\r\n  token: null,\r\n  isLoggedIn: false,\r\n  isFetchingCurrentUser: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: {\r\n    [authOperations.register.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logIn.fulfilled](state, action) {\r\n      state.user = action.payload.user;\r\n      state.token = action.payload.token;\r\n      state.isLoggedIn = true;\r\n    },\r\n    [authOperations.logOut.fulfilled](state) {\r\n      state.user = { name: null, email: null };\r\n      state.token = null;\r\n      state.isLoggedIn = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.pending](state) {\r\n      state.isFetchingCurrentUser = true;\r\n    },\r\n    [authOperations.fetchCurrentUser.fulfilled](state, action) {\r\n      state.user = action.payload;\r\n      state.isLoggedIn = true;\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n    [authOperations.fetchCurrentUser.rejected](state) {\r\n      state.isFetchingCurrentUser = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","export default __webpack_public_path__ + \"static/media/default-avatar.e44fc4e2.png\";","import { useDispatch, useSelector } from 'react-redux';\r\nimport { authSelectors, authOperations } from '../../redux/auth';\r\nimport defaultAvatar from './default-avatar.png';\r\n\r\nimport s from './UserMenu.module.css';\r\n\r\nexport default function UserMenu() {\r\n  const dispatch = useDispatch();\r\n  const name = useSelector(authSelectors.getUsername);\r\n  const avatar = defaultAvatar;\r\n\r\n  return (\r\n    <div className={s.container}>\r\n      <img src={avatar} alt=\"\" width=\"32\" className={s.avatar} />\r\n      <span className={s.name}>Добро пожаловать, {name}</span>\r\n      <button type=\"button\" onClick={() => dispatch(authOperations.logOut())}>\r\n        Выйти\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport s from './Navigation.module.css';\r\nimport { authSelectors } from '../../redux/auth';\r\n\r\nconst Navigation = () => {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <nav>\r\n      <NavLink to=\"/\" exact className={s.link} activeClassName={s.activelink}>\r\n        Главная\r\n      </NavLink>\r\n\r\n      {isLoggedIn && (\r\n        <NavLink\r\n          to=\"/contacts\"\r\n          exact\r\n          className={s.link}\r\n          activeClassName={s.activelink}\r\n        >\r\n          Контакты\r\n        </NavLink>\r\n      )}\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import { useSelector } from 'react-redux';\r\n\r\nimport AuthNav from '../AuthNav';\r\nimport UserMenu from '../UserMenu';\r\nimport Navigation from '../Navigation';\r\n\r\nimport { authSelectors } from '../../redux/auth';\r\n\r\nimport s from './AppBar.module.css';\r\n\r\nexport default function AppBar() {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <div className={s.appbar}>\r\n      <Navigation />\r\n      {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n    </div>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}\r\n","import { useSelector } from 'react-redux';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { authSelectors } from '../redux/auth';\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLoggedIn = useSelector(authSelectors.getIsLoggedIn);\r\n  const shouldRedirect = isLoggedIn && restricted;\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Spinner from 'react-loader-spinner';\r\nimport s from './Loader.module.css';\r\n\r\nexport default function Loader() {\r\n  return (\r\n    <div className={s.spinner}>\r\n      <Spinner type=\"Puff\" color=\"#007179\" height={300} width={300} />\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, Suspense, lazy } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Switch } from 'react-router-dom';\r\n// import Phonebook from './Component/Phonebook';\r\nimport AppBar from './Components/AppBar';\r\nimport PrivateRoute from './Components/PrivateRoute';\r\nimport PublicRoute from './Components/PublicRoute';\r\nimport Container from './Components/Container';\r\nimport { authOperations, authSelectors } from './redux/auth';\r\n\r\nimport Loader from './Components/Loader';\r\n\r\nconst HomeView = lazy(() => import('./views/HomeView'));\r\nconst RegisterView = lazy(() => import('./views/RegisterView'));\r\nconst LoginView = lazy(() => import('./views/LoginView'));\r\nconst ContactsView = lazy(() => import('./views/ContactsView'));\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n  const isFetchingCurrentUser = useSelector(authSelectors.getIsFetchingCurrent);\r\n\r\n  useEffect(() => {\r\n    dispatch(authOperations.fetchCurrentUser());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <Container>\r\n      {isFetchingCurrentUser ? (\r\n        <Loader />\r\n      ) : (\r\n        <>\r\n          <AppBar />\r\n          <Switch>\r\n            <Suspense fallback={<p>Загружаем...</p>}>\r\n              <PublicRoute exact path=\"goit-react-hw-08-phonebook\">\r\n                <HomeView />\r\n              </PublicRoute>\r\n              <PublicRoute exact path=\"/register\" restricted>\r\n                <RegisterView />\r\n              </PublicRoute>\r\n              <PublicRoute\r\n                exact\r\n                path=\"/login\"\r\n                redirectTo=\"/contacts\"\r\n                restricted\r\n              >\r\n                <LoginView />\r\n              </PublicRoute>\r\n              <PrivateRoute path=\"/contacts\" redirectTo=\"/login\">\r\n                <ContactsView />\r\n              </PrivateRoute>\r\n            </Suspense>\r\n          </Switch>\r\n        </>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n//  <AppBar />\r\n\r\n//       <Switch>\r\n//         <Route exact path=\"/\" component={HomeView} />\r\n//         <Route path=\"/register\" component={RegisterView} />\r\n//         <Route path=\"/login\" component={LoginView} />\r\n//         <Route path=\"/contacts\" component={ContactsView} />\r\n//       </Switch>\r\n","import { createReducer } from '@reduxjs/toolkit';\r\nimport { combineReducers } from 'redux';\r\nimport * as contactsActions from './contacts-actions';\r\nimport {\r\n  fetchContacts,\r\n  addContact,\r\n  deleteContact,\r\n} from '../contacts/contacts-operations';\r\n\r\nconst itemsReducer = createReducer([], {\r\n  [fetchContacts.fulfilled]: (_, { payload }) => payload,\r\n  [addContact.fulfilled]: (state, { payload }) => [...state, payload],\r\n  [deleteContact.fulfilled]: (state, { payload }) =>\r\n    state.filter(({ id }) => {\r\n      //приводим id к строке, т.к.e.target.id возвращает нам строку\r\n      return id.toString() !== payload;\r\n    }),\r\n});\r\n\r\nconst isLoadingReducer = createReducer(false, {\r\n  [fetchContacts.pending]: () => true,\r\n  [fetchContacts.fulfilled]: () => false,\r\n  [fetchContacts.rejected]: () => false,\r\n\r\n  [addContact.pending]: () => true,\r\n  [addContact.fulfilled]: () => false,\r\n  [addContact.rejected]: () => false,\r\n\r\n  [deleteContact.pending]: () => true,\r\n  [deleteContact.fulfilled]: () => false,\r\n  [deleteContact.rejected]: () => false,\r\n});\r\n\r\nconst errorReducer = createReducer(null, {\r\n  [fetchContacts.rejected]: (_, { payload }) => payload,\r\n  [fetchContacts.pending]: () => null,\r\n\r\n  [addContact.rejected]: (_, { payload }) => payload,\r\n  [addContact.pending]: () => null,\r\n\r\n  [deleteContact.rejected]: (_, { payload }) => payload,\r\n  [deleteContact.pending]: () => null,\r\n});\r\n\r\nconst filterReducer = createReducer('', {\r\n  [contactsActions.updateFilter]: (_, { payload }) => payload,\r\n});\r\n\r\nconst contactsReducer = combineReducers({\r\n  items: itemsReducer,\r\n  filter: filterReducer,\r\n  isLoading: isLoadingReducer,\r\n  error: errorReducer,\r\n});\r\n\r\nexport default contactsReducer;\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { contactsReducer } from './contacts';\r\nimport { authReducer } from './auth';\r\n\r\nconst middleware = [\r\n  ...getDefaultMiddleware({\r\n    serializableCheck: {\r\n      ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\r\n    },\r\n  }),\r\n];\r\n\r\nconst authPersistConfig = {\r\n  key: 'auth',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(authPersistConfig, authReducer),\r\n    contacts: contactsReducer,\r\n  },\r\n  middleware,\r\n  devTools: process.env.NODE_ENV === 'development',\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport App from './App';\r\nimport { store, persistor } from './redux/store';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport './styles/base.css';\r\n\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <PersistGate loading={null} persistor={persistor}>\r\n        <BrowserRouter>\r\n          <App />\r\n        </BrowserRouter>\r\n      </PersistGate>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__3Z5aZ\",\"activelink\":\"AuthNav_activelink__32Lbb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"Navigation_link__3q6q8\",\"activelink\":\"Navigation_activelink__1j9JW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"UserMenu_container__2bDbj\",\"avatar\":\"UserMenu_avatar__2gfvK\",\"name\":\"UserMenu_name__1PR6N\"};","import { createAction } from '@reduxjs/toolkit';\r\n\r\n//filter\r\nexport const updateFilter = createAction('phonebook/updateFilter');\r\n","import s from './Container.module.css';\r\n\r\nexport default function Container({ children }) {\r\n  return <div className={s.container}>{children}</div>;\r\n}\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport s from './AuthNav.module.css';\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink\r\n        to=\"/register\"\r\n        exact\r\n        className={s.link}\r\n        activeClassName={s.activelink}\r\n      >\r\n        Регистрация\r\n      </NavLink>\r\n      <NavLink\r\n        to=\"/login\"\r\n        exact\r\n        className={s.link}\r\n        activeClassName={s.activelink}\r\n      >\r\n        Логин\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appbar\":\"AppBar_appbar__nWOKc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3QBg6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Loader_spinner__1J4oD\"};","import { createAsyncThunk } from '@reduxjs/toolkit';\r\n\r\nimport axios from 'axios';\r\n\r\nexport const fetchContacts = createAsyncThunk(\r\n  'phonebook/fetchContacts',\r\n  async () => {\r\n    const { data } = await axios.get('/contacts');\r\n    return data;\r\n  },\r\n);\r\n\r\nexport const addContact = createAsyncThunk(\r\n  'phonebook/addContact',\r\n  async contact => {\r\n    console.log(contact);\r\n    const { data } = await axios.post('/contacts', contact);\r\n    return data;\r\n  },\r\n);\r\n\r\nexport const deleteContact = createAsyncThunk(\r\n  'phonebook/deleteContact',\r\n  async id => {\r\n    await axios.delete(`/contacts/${id}`);\r\n    return id;\r\n  },\r\n);\r\n"],"sourceRoot":""}